{% extends 'assignments/base.html' %}
{% block meta %}
    <meta name="title" content="GWD - Dashboard">
    <meta name="keyword" content="GWD, Get Work Done, Dashboard, Referral Earnings, Withdrawals, Orders, Account Summary">
    <meta name="description" content="Access your GWD Dashboard to get an overview of your account activity. See your referral earnings, withdrawal history, and orders on a single page. Stay updated with your account summary and earnings from referrals.">
{% endblock %}
{% block content %}

<!-- Page Heading -->
<div class="d-sm-flex align-items-center justify-content-between mb-4">
    <h1 class="h3 mb-0 text-gray-800">Dashboard</h1>
    <div>
    <a href="#" class="d-none d-sm-inline-block btn btn-sm btn-success shadow-sm" data-toggle="modal" data-target="#ProjectModel"><i class="fas fa-file-alt fa-sm text-white-50"></i> Leave a Project</a>
    <a href="#" class="d-none d-sm-inline-block btn btn-sm btn-info shadow-sm" data-toggle="modal" data-target="#AssignmentModel"><i class="fas fa-file-alt fa-sm text-white-50"></i> Leave Assignment(s)</a>
    <a href="#" class="d-none d-sm-inline-block btn btn-sm btn-primary shadow-sm" data-toggle="modal" data-target="#getCode"><i class="fas fa-code fa-sm text-white-50"></i> Get Code</a>
    </div>
</div>

{% include 'assignments/partials/card.html' %}

<div class="row">

    <!-- Area Chart -->
    <div class="col-xl-4 col-lg-4 col-md-6">
        <div class="card shadow mb-4">
            <!-- Card Header - Dropdown -->
            <div
                class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                <h6 class="m-0 font-weight-bold text-primary">Earnings Overview</h6>
            </div>
            <!-- Card Body -->
            <div class="card-body">
                <div class="chart-area">
                    <canvas id="myAreaChart"></canvas>
                </div>
                <hr>
                Experience the power of 
                <code>Technology for All</code> by VSTech Limited.
            </div>
        </div>
    </div>

    <div class="col-xl-4 col-lg-4 col-md-6">
        <div class="card shadow mb-4">
            <div class="card-header py-3">
                <h6 class="m-0 font-weight-bold text-primary">Withdrawals</h6>
            </div>
            <div class="card-body">
                <div class="chart-bar"><div class="chartjs-size-monitor"><div class="chartjs-size-monitor-expand"><div class=""></div></div><div class="chartjs-size-monitor-shrink"><div class=""></div></div></div>
                    <canvas id="myBarChart" width="399" height="320" style="display: block; width: 399px; height: 320px;" class="chartjs-render-monitor"></canvas>
                </div>
                <hr>
                Experience the power of 
                <code>Technology for All</code> by VSTech Limited.
            </div>
        </div>
    </div>

    <!-- Pie Chart -->
    <div class="col-xl-4 col-lg-4 col-md-6">
        <div class="card shadow mb-4">
            <!-- Card Header - Dropdown -->
            <div
                class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                <h6 class="m-0 font-weight-bold text-primary">Orders Chart</h6>
            </div>
            <!-- Card Body -->
            <div class="card-body">
                <div class="chart-pie pt-4 pb-2">
                    <canvas id="myPieChart2"></canvas>
                </div>
                <div class="mt-4 text-center small">
                    <span class="mr-2">
                        <i class="fas fa-circle text-success"></i> Completed
                    </span>
                    <span class="mr-2">
                        <i class="fas fa-circle text-warning"></i> Pending
                    </span>
                    <span class="mr-2">
                        <i class="fas fa-circle text-danger"></i> Cancelled
                    </span>
                </div>
                <hr>
                Experience the power of 
                <code>Technology for All</code> by VSTech Limited.
            </div>
        </div>
    </div>
</div>
<div id="completed-count" data-count="{{ completed_orders }}"></div>
<div id="cancelled-count" data-count="{{ cancelled_orders }}"></div>
<div id="pending-count" data-count="{{ pending_orders }}"></div>

{% endblock %}

{% block js %}
 <script src="/static/sb/js/demo/chart-area-demo.js"></script>
 <script src="/static/sb/js/demo/chart-bar-demo.js"></script>
<script>
    
Chart.defaults.global.defaultFontFamily = 'Nunito', '-apple-system,system-ui,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif';
Chart.defaults.global.defaultFontColor = '#858796';
var data_list = []
var completed_orders = parseInt(document.getElementById("completed-count").getAttribute("data-count"));
var cancelled_orders = parseInt(document.getElementById("cancelled-count").getAttribute("data-count"));
var pending_orders = parseInt(document.getElementById("pending-count").getAttribute("data-count"));
data_list[0] = completed_orders;
data_list[1] = cancelled_orders;
data_list[2] = pending_orders;

var ctx = document.getElementById("myPieChart2");
var myPieChart = new Chart(ctx, {
  type: 'doughnut',
  data: {
    labels: ["Completed", "Cancelled", "Pending"],
    datasets: [{
      data: data_list,
      backgroundColor: ['#1cc88a', '#e74a3b', '#f6c23e'],
      hoverBackgroundColor: ['#17a673', '#e02d1b', '#f4b619'],
      hoverBorderColor: "rgba(234, 236, 244, 1)",
    }],
  },
  options: {
    maintainAspectRatio: false,
    tooltips: {
      backgroundColor: "rgb(255,255,255)",
      bodyFontColor: "#858796",
      borderColor: '#dddfeb',
      borderWidth: 1,
      xPadding: 15,
      yPadding: 15,
      displayColors: false,
      caretPadding: 10,
    },
    legend: {
      display: false
    },
    cutoutPercentage: 80,
  },
});
</script>
{% endblock %}